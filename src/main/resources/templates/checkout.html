<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout}">
<head>
	<meta charset="UTF-8">
	<title>Checkout</title>
</head>
<body>
<div layout:fragment="content">
	<section class="header_text sub">
		<img class="pageBanner" src="/front/themes/images/pageBanner.png" alt="New products">
		<h4><span>Check Out</span></h4>
	</section>

	<section class="main-content">
		<div class="row">
			<div class="span12">
				<form method="post" th:action="@{/checkout}">
					<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
					<div class="accordion" id="accordion2">

						<!-- Account & Billing Details -->
						<div class="accordion-group">
							<div class="accordion-heading">
								<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
									Account &amp; Billing Details
								</a>
							</div>
							<div id="collapseTwo" class="accordion-body collapse in">
								<div class="accordion-inner">
									<div class="row-fluid">
										<div class="span6">
											<h4>Your Personal Details</h4>

											<div class="control-group">
												<label class="control-label">First Name</label>
												<div class="controls">
													<input type="text" class="input-xlarge" th:value="${user.name}" readonly>
												</div>
											</div>

											<div class="control-group">
												<label class="control-label">Last Name</label>
												<div class="controls">
													<input type="text" class="input-xlarge" th:value="${user.surname}" readonly>
												</div>
											</div>

											<div class="control-group">
												<label class="control-label">Email Address</label>
												<div class="controls">
													<input type="text" class="input-xlarge" th:value="${user.email}" readonly>
												</div>
											</div>

											<div class="control-group">
												<label class="control-label">Phone Number</label>
												<div class="controls">
													<input type="text" class="input-xlarge" name="phoneNumber" required>
												</div>
											</div>
										</div>

										<div class="span6">
											<h4>Your Address</h4>

											<div class="control-group">
												<label class="control-label">Address</label>
												<div class="controls">
													<input type="text" class="input-xlarge" name="address" required>
												</div>
											</div>

											<div class="control-group">
												<label class="control-label">City</label>
												<div class="controls">
													<input type="text" class="input-xlarge" name="city" required>
												</div>
											</div>

											<div class="control-group">
												<label class="control-label">Post Code</label>
												<div class="controls">
													<input type="text" class="input-xlarge" name="postcode" required>
												</div>
											</div>
										</div>
									</div> <!-- row-fluid -->
								</div>
							</div>
						</div>

						<!-- Basket Summary -->
						<div class="accordion-group">
							<div class="accordion-heading">
								<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseBasket">
									Your Basket
								</a>
							</div>
							<div id="collapseBasket" class="accordion-body collapse in">
								<div class="accordion-inner">
									<table class="table table-bordered table-striped">
										<thead>
										<tr>
											<th>Image</th>
											<th>Product</th>
											<th>Quantity</th>
											<th>Size</th>
											<th>Unit Price</th>
											<th>Total</th>
										</tr>
										</thead>
										<tbody>
										<tr th:each="basket : ${baskets}">
											<td>
												<img th:src="@{${basket.product.photoUrl}}" width="60" height="60" alt="">
											</td>
											<td th:text="${basket.product.name}"></td>
											<td th:text="${basket.quantity}"></td>
											<td th:text="${basket.size}"></td>
											<td th:text="${#numbers.formatDecimal(basket.product.resultPrice, 0, 2)} + ' $'"></td>
											<td th:text="${#numbers.formatDecimal(basket.totalPrice, 0, 2)} + ' $'"></td>
										</tr>
										</tbody>
									</table>

									<!-- âœ… Total Price -->
									<p class="cart-total right" style="text-align: right; font-size: 18px; margin-top: 15px;">
										<strong>Total Price:</strong>
										<span th:text="${#numbers.formatDecimal(subTotal, 0, 2)} + ' $'" >0.00 $</span>
									</p>
								</div>
							</div>
						</div>

						<!-- Confirm Order -->
						<div class="accordion-group">
							<div class="accordion-heading">
								<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
									Confirm Order
								</a>
							</div>
							<div id="collapseThree" class="accordion-body collapse in">
								<div class="accordion-inner">
									<div class="row-fluid">
										<div class="control-group">
											<label for="textarea" class="control-label">Comments</label>
											<div class="controls">
												<textarea rows="3" id="textarea" class="span12" name="comment"></textarea>
											</div>
										</div>
										<button type="submit" class="btn btn-inverse pull-right">Confirm order</button>
									</div>
								</div>
							</div>
						</div>

					</div> <!-- accordion -->
				</form>
			</div>
		</div>
	</section>
</div>
</body>
</html>
